<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Breathing</title>
    
    <!-- [êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ ì½”ë“œ ìœ„ì¹˜] -->
    <!-- 1. ì• ë“œì„¼ìŠ¤ì—ì„œ ë³µì‚¬í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì•„ë˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”. -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7426888933427261" crossorigin="anonymous"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob { animation: blob 7s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
    </style>
</head>
<body class="bg-slate-900 text-white overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
        const HeartIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5 4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
        );
        const PlayIcon = ({ size }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>);
        const SquareIcon = ({ size }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/></svg>);

        function App() {
            const [isActive, setIsActive] = useState(false);
            const [phase, setPhase] = useState('idle');
            const [userInput, setUserInput] = useState('');
            const [instruction, setInstruction] = useState('ê³ ë¯¼ì´ ìˆë‹¤ë©´ ì ì–´ë³´ì„¸ìš”');
            
            const timerRef = useRef(null);

            const guide = {
                inhale: 'ìˆ¨ì„ ê¹Šê²Œ ë“¤ì´ë§ˆì‹œì„¸ìš”...',
                hold: 'ì ì‹œ ë©ˆì¶”ì„¸ìš”.',
                exhale: 'ì²œì²œíˆ ë‚´ë±‰ìœ¼ì„¸ìš”...'
            };

            const getCircleStyle = () => {
                switch (phase) {
                    case 'inhale': return 'scale-150 bg-blue-400/30 border-blue-200 shadow-[0_0_60px_rgba(96,165,250,0.6)]';
                    case 'hold': return 'scale-150 bg-indigo-400/30 border-indigo-200 shadow-[0_0_80px_rgba(129,140,248,0.6)]';
                    case 'exhale': return 'scale-100 bg-teal-400/30 border-teal-200 shadow-[0_0_30px_rgba(45,212,191,0.4)]';
                    default: return 'scale-100 bg-gray-300/20 border-gray-300 shadow-none';
                }
            };

            const toggleBreathing = () => {
                if (!isActive) {
                    if (userInput.trim()) {
                        setInstruction(`"${userInput}"... ì ì‹œ ë‚´ë ¤ë†“ê³  ì‰¬ì–´ê°€ì„¸ìš”`);
                    } else {
                        setInstruction('ì ì‹œ ì‰¬ì–´ê°€ì„¸ìš”');
                    }
                    setIsActive(true);
                } else {
                    setIsActive(false);
                    setUserInput('');
                    setInstruction('ê³ ë¯¼ì´ ìˆë‹¤ë©´ ì ì–´ë³´ì„¸ìš”');
                }
            };

            useEffect(() => {
                if (!isActive) {
                    clearTimeout(timerRef.current);
                    setPhase('idle');
                    return;
                }

                const startDelay = setTimeout(() => {
                    runCycle();
                }, 3000);

                const runCycle = () => {
                    setPhase('inhale');
                    setInstruction(guide.inhale);
                    
                    timerRef.current = setTimeout(() => {
                        setPhase('hold');
                        setInstruction(guide.hold);
                        
                        timerRef.current = setTimeout(() => {
                            setPhase('exhale');
                            setInstruction(guide.exhale);
                            
                            timerRef.current = setTimeout(() => {
                                runCycle();
                            }, 4000); 
                        }, 2000); 
                    }, 4000); 
                };

                return () => {
                    clearTimeout(startDelay);
                    clearTimeout(timerRef.current);
                };
            }, [isActive]);

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 relative font-sans">
                    {/* ë°°ê²½ ì• ë‹ˆë©”ì´ì…˜ */}
                    <div className="absolute top-10 left-10 w-64 h-64 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
                    <div className="absolute top-10 right-10 w-64 h-64 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
                    <div className="absolute -bottom-8 left-20 w-64 h-64 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>

                    <div className="z-10 flex flex-col items-center gap-10 max-w-md w-full">
                        {/* í—¤ë” */}
                        <div className="text-center space-y-2">
                            <div className="flex items-center justify-center gap-2 text-rose-300 mb-2">
                                <HeartIcon className={isActive ? "animate-pulse" : ""} />
                                <span className="text-xs font-medium tracking-widest uppercase">Mindful Breathing</span>
                            </div>
                            <h1 className="text-3xl md:text-4xl font-light tracking-tight text-white/90">
                                ì ì‹œ ì‰¬ì–´ê°€ì„¸ìš”
                            </h1>
                        </div>

                        {/* ì…ë ¥ì°½ */}
                        {!isActive && (
                            <div className="w-full bg-white/10 backdrop-blur-md rounded-xl p-1 border border-white/20 shadow-lg flex transition-all">
                                <input 
                                    type="text" 
                                    value={userInput}
                                    onChange={(e) => setUserInput(e.target.value)}
                                    placeholder="ì§€ê¸ˆ ë¨¸ë¦¿ì†ì„ ë§´ë„ëŠ” ìƒê°ì€?"
                                    className="flex-1 bg-transparent px-4 py-3 text-white placeholder-slate-400 focus:outline-none"
                                    onKeyDown={(e) => e.key === 'Enter' && toggleBreathing()}
                                />
                            </div>
                        )}

                        {/* í˜¸í¡ ì› */}
                        <div className="relative flex items-center justify-center h-80 w-80">
                            <div className="absolute w-48 h-48 border border-white/10 rounded-full"></div>
                            <div className={`w-48 h-48 rounded-full border-2 backdrop-blur-sm flex items-center justify-center transition-all ease-in-out duration-[4000ms] ${getCircleStyle()}`}
                                 style={{ transitionDuration: phase === 'hold' ? '2000ms' : '4000ms' }}>
                                {isActive ? (
                                    <span className={`text-4xl transition-opacity duration-1000 ${phase === 'exhale' ? 'opacity-50' : 'opacity-100'}`}>ğŸ’¨</span>
                                ) : (
                                    <span className="text-4xl animate-bounce">ğŸŒ¿</span>
                                )}
                            </div>
                        </div>

                        {/* í…ìŠ¤íŠ¸ ê°€ì´ë“œ */}
                        <div className="h-20 flex items-center justify-center w-full px-4">
                            <p className={`text-xl font-light text-center transition-all duration-700 ${isActive ? 'text-white' : 'text-slate-400'}`}>
                                {instruction}
                            </p>
                        </div>

                        {/* ë²„íŠ¼ */}
                        <button
                            onClick={toggleBreathing}
                            className={`px-8 py-4 rounded-full flex items-center gap-3 transition-all duration-300 ${isActive ? 'bg-rose-500/10 text-rose-300 border border-rose-500/50' : 'bg-white text-slate-900 hover:scale-105'}`}
                        >
                            {isActive ? <><SquareIcon size={18} /><span className="font-medium">ê·¸ë§Œí•˜ê¸°</span></> : <><PlayIcon size={18} /><span className="font-medium">ì‹œì‘í•˜ê¸°</span></>}
                        </button>
                    </div>

                    {/* [ê´‘ê³  í‘œì‹œ ì˜ì—­ ì˜ˆì‹œ] */}
                    {/* í•„ìš”í•˜ë‹¤ë©´ í™”ë©´ í•˜ë‹¨ì— ê´‘ê³ ê°€ í‘œì‹œë  ìë¦¬ë¥¼ ë§ˆë ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. */}
                    <div className="absolute bottom-2 w-full flex justify-center z-20">
                         {/* ì• ë“œì„¼ìŠ¤ ë””ìŠ¤í”Œë ˆì´ ê´‘ê³  ì½”ë“œë¥¼ ì—¬ê¸°ì— ë„£ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. */}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
